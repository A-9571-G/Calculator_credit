<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creador de Tablas de Amortización</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 8px;
            text-align: left;
        }
    </style>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
        theme: {
            extend: {
            }
        }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
        .content-auto {
            content-visibility: auto;
        }
        }
    </style>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp"></script>
    <title>Solid Credit</title>
</head>
<body class="grid grid-cols-12"> 
    <main class="col-start-2 col-end-11 mt-9">
        <h2 class="font-bold text-center text-5xl mb-8">Creador de Tablas de Amortización</h2>
        
        <form id="loanForm">
            <label for="principal">Monto del préstamo:</label>
            <input type="number" id="principal" required>
            <br><br>
            
            <label for="rate">Tasa de interés anual (%):</label>
            <input type="number" id="rate" step="0.01" required>
            <br><br>
            
            <label for="month">Plazo ( mensual):</label>
            <input type="number" id="month" required>
            <br><br>
            <label for="method">Método de Cálculo:</label>
            <select id="method">
                <option value="frances">Francés (cuotas fijas)</option>
                <option value="metodoX">Método X</option>
            </select>
            <br><br>
        
            
            <button type="button" id="btn-loadfrom">
                Generar Tabla
            </button>
        </form>
        
        <table id="amortizationTable">
            <!-- Aquí se insertarán las filas de la tabla -->
        </table>
    </main>
    <footer class="w-full flex p-2 justify-center fixed left-0 right-0 bottom-0 bg-stone-600 text-stone-200">
        <p>© 2023 - 
            <a href="https://github.com/AG-9571">ag9571</a> 
        </p>
    </footer>
<script src="../../../dist/bin/Solid.bin.js"></script>
<script>
    function generateTable() {
        const principal = parseFloat(document.getElementById("principal").value);
        const rate = parseFloat(document.getElementById("rate").value) / 100;
        const years = parseInt(document.getElementById("years").value);
        
        const monthlyRate = rate / 12;
        const totalPayments = years * 12;
        const monthlyPayment = (principal * monthlyRate) / (1 - Math.pow(1 + monthlyRate, -totalPayments));

        let balance = principal;
        let tableContent = `
            <thead>
                <tr>
                    <th>Período</th>
                    <th>Cuota</th>
                    <th>Interés</th>
                    <th>Amortización</th>
                    <th>Saldo pendiente</th>
                </tr>
            </thead>
            <tbody>
        `;

        for (let i = 1; i <= totalPayments; i++) {
            const interestForThisMonth = balance * monthlyRate;
            const principalForThisMonth = monthlyPayment - interestForThisMonth;
            balance -= principalForThisMonth;

            tableContent += `
                <tr>
                    <td>${i}</td>
                    <td>${monthlyPayment.toFixed(2)}</td>
                    <td>${interestForThisMonth.toFixed(2)}</td>
                    <td>${principalForThisMonth.toFixed(2)}</td>
                    <td>${balance.toFixed(2)}</td>
                </tr>
            `;
        }

        tableContent += '</tbody>';
        document.getElementById("amortizationTable").innerHTML = tableContent;
    }
</script>
<script src="./script.js"></script>
</body>
</html>

